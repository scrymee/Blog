---
categories:
  - programming
tags:
  - php
date: 2022-08-31 10:27:14
title: phpで&&と||を用いたワンライナー条件説の挙動
---

<!-- toc -->

<!-- more -->

## &&と||を真偽値の判定意外に条件説を使用できるっぽい

下記に準じたコードを見かけた

```php
$hasData = true;
$hasData && $this->log('データを持っています');
```

論理演算子は、if文の中で使用するイメージが合ったためわからなかったが、こういう記述があるようだ。
感覚的にわからなかったので試してみた

## 結論

これは&&以前がtrueであれば後続の処理を実行し、falseであれば実行しないという記載らしい・

要するに

```php
$hasData && $this->logMsg();

if ($hasData) {
  $this->logMsg();
}
```

と同義らしい。
年のために動作確認をする

## 動作確認

適当な真偽値を返却する無名関数を作成し、それを用いてテストする

```php
function test()
{
  $true = function ()
  {
    return true;
  }
  $false = function ()
  {
    return false;
  }
  $echo = function ()
  {
    echo 'echo関数が実行されました'
  }
}

```

これを使って書きを実行すると下記のような挙動になった

```php
$true && $echo
// => echo関数が実行されました
$false && $echo
// => 何も出力されない
$true || $echo
// => 何も出力されない
$false || $echo
// => echo関数が実行されました
```

まあ論理的に考えるとには`&&`のときのはじめの条件節がfalseだと後半が実行する必要がないため、trueのときのみ進行し、
`||`のときは前半がtrueであれば後半は実行する必要がなくfalseのときは後半を実行する必要があるので、動作としては納得。

ただ、感覚的になじまないから基本的には使わないほうが良さそうな気もするなあ。。。。

## 余談

同僚と三項演算子の話をしたときに、「知らなかったからそうやって書いたことない」と聞いた。
知らないことは別に良いのだけど、三項演算子の話とこの条件節のワンライナーは意味合いとして同じなのかなと思う。
知っている人にとっては当たり前だから、手癖で書いてしまうけど、そうでない場合は未知のコードのように見えてしまう。
かといって、三項演算子を使わない理由もないんだよなあ。と思うし、どのへんで折り合いをつけるか判断できない。
これと三項演算子の違いはなんだろうか。自身が知っているか知らないかに集約されてしまうのだろうか？
