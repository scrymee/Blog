---
title: ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®xargså†…ã§è¤‡æ•°ã®å¤‰æ•°ã‚’ä½¿ç”¨ã™ã‚‹
categories:
  - programming
tags:
  - [coding]
  - [shell]
date: 2022-08-17 10:04:19
---

<!-- toc -->

## Summary

- ã‚·ã‚§ãƒ«ã§ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§åŠ å·¥å‰ã®å¤‰æ•°ã¨åŠ å·¥å¾Œã®å¤‰æ•°ã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•
- `shell -c 'XX'`ã‚’ç”¨ã„ã‚‹

<!-- more -->

## ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã‹ã‚‰å–å¾—ã™ã‚‹

```sh
$ ls -1
apple-ringo.txt
fish-sakana.txt
```

### å®Ÿè¡Œã™ã‚‹ã‚·ã‚§ãƒ«

```sh
find ./app/tests/ -name *.txt | xargs -I@ sh -c " VAR=`sed 's/-//g'`; phpunit @ --coverage-php reports/$VAR.php"
```

### è§£èª¬

å®Ÿè¡Œã‚·ã‚§ãƒ«ã®`find`ã§ã€app/testsé…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…¨å–å¾—ã™ã‚‹

```sh
$ find ./app/tests/ -name *.txt
app/tests/apple-ringoTest.php
app/tests/fish-sakanaTest.php
```

ãã®å¾Œ`xargs -I@`ã§å–å¾—ã—ãŸå€¤ã‚’å¼•æ•°ã¨ã—ã¦æ¸¡ã™ãŒã€å¼•æ•°ã®ï¼‘ã¤ã‚’åŠ å·¥ã—ãŸã„ã€‚

1. `sed`ã§ç½®æ›ã—ãŸå€¤ã‚’`VAR`ã¨ã„ã†å¤‰æ•°ã«ä»£å…¥ã€‚ï¼ˆå¤‰æ•°ã«ã‚³ãƒãƒ³ãƒ‰çµæœã‚’ä»£å…¥ã—ãŸã„å ´åˆã¯ãƒãƒƒã‚¯ã‚¯ã‚ªãƒ¼ãƒˆã‚’ä½¿ã†)
2. ãã®å¾Œã€ã‚»ãƒŸã‚³ãƒ­ãƒ³ã§æ¬¡ã®å‡¦ç†ã‚’æ›¸ã
3. @å†…ã®å¤‰æ•°ã¨VARã®å¤‰æ•°ãŒãã‚Œãã‚Œä½¿ç”¨ã§ãã‚‹ã®ã§è¨˜è¼‰ã™ã‚‹
4. 1~3ã¾ã§ã®å‡¦ç†ã‚’`sh -c`ã§å›²ã‚“ã§ã‚ã’ã‚‹

æœ€çµ‚çš„ã«ä¸‹è¨˜ã®ã‚ˆã†ãªã‚³ãƒãƒ³ãƒ‰éƒ¡ãŒå®Ÿè¡Œã•ã‚Œã‚‹

```sh
phpunit app/tests/apple-ringoTest.php --coverage-php reports/appleringoTest.php
phpunit app/tests/fish-sakanaTest.php --coverage-php reports/fishsakanaTest.php
```

ã“ã‚Œã§ã‚ˆã—
